<FULL UPDATED APP CODE WITH AUTO-TIER (from previous canvas update)>